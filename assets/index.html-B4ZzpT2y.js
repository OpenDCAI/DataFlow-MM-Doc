import{_ as i,c as a,b as t,o as e}from"./app-Ct5swOin.js";const n={};function l(h,s){return e(),a("div",null,s[0]||(s[0]=[t(`<h2 id="ğŸ“˜-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#ğŸ“˜-æ¦‚è¿°"><span>ğŸ“˜ æ¦‚è¿°</span></a></h2><p><code>ImageLongCLIPEvaluator</code> ä½¿ç”¨ <strong>LongCLIP</strong> è®¡ç®—å›¾åƒä¸<strong>é•¿æ–‡æœ¬</strong>çš„å¯¹é½åˆ†æ•°ï¼Œåˆ†æ•°èŒƒå›´ä¸º <code>[0,1]</code>ã€‚<br> ç›¸è¾ƒäºæ ‡å‡† CLIPï¼ŒLongCLIP æ”¯æŒæ›´é•¿çš„æ–‡æœ¬ä¸Šä¸‹æ–‡ï¼ˆæœ¬å®ç°é»˜è®¤ <code>context_length=248</code>ï¼‰ï¼Œé€‚åˆæ®µè½çº§æè¿°çš„åŒ¹é…è¯„ä¼°ä¸å¯¹é½æ‰“åˆ†ä»»åŠ¡ã€‚</p><p>å†…éƒ¨æµç¨‹ä¸ CLIP ç±»ä¼¼ï¼šå¯¹å›¾åƒä¸æ–‡æœ¬åˆ†åˆ«ç¼–ç ï¼Œå¾—åˆ°å‘é‡ååš L2 å½’ä¸€åŒ–ï¼Œå†è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œå¹¶é€šè¿‡ <code>(cos + 1) / 2</code> æ˜ å°„åˆ° <code>[0,1]</code> åŒºé—´ã€‚</p><h2 id="init-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#init-å‡½æ•°"><span><code>__init__</code>å‡½æ•°</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> __init__</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    model_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">BeichenZhang/LongCLIP-L-336px</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> None</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="initå‚æ•°è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#initå‚æ•°è¯´æ˜"><span><code>init</code>å‚æ•°è¯´æ˜</span></a></h2><table><thead><tr><th style="text-align:left;">å‚æ•°å</th><th style="text-align:left;">ç±»å‹</th><th style="text-align:left;">é»˜è®¤å€¼</th><th style="text-align:left;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left;"><code>model_name</code></td><td style="text-align:left;"><code>str</code></td><td style="text-align:left;"><code>&quot;BeichenZhang/LongCLIP-L-336px&quot;</code></td><td style="text-align:left;">LongCLIP æ¨¡å‹ checkpoint æ ‡è¯†ï¼›è‹¥ä¸º<strong>ç›®å½•è·¯å¾„</strong>ï¼Œç®—å­ä¼šåœ¨ç›®å½•ä¸­æœç´¢ä»¥ <code>.pt</code> / <code>.bin</code> / <code>.ckpt</code> ç»“å°¾çš„æ–‡ä»¶å¹¶è‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªè¿›è¡ŒåŠ è½½ï¼›è‹¥ä¸º<strong>æ–‡ä»¶è·¯å¾„</strong>ï¼Œåˆ™ç›´æ¥å°†è¯¥æ–‡ä»¶ä½œä¸ºæƒé‡åŠ è½½ã€‚</td></tr><tr><td style="text-align:left;"><code>device</code></td><td style="text-align:left;"><code>str | None</code></td><td style="text-align:left;"><code>None</code></td><td style="text-align:left;">æ¨ç†è®¾å¤‡ï¼›<code>None</code> æ—¶è‡ªåŠ¨é€‰æ‹©å¯ç”¨çš„ <code>&quot;cuda&quot;</code>ï¼Œå¦åˆ™ä½¿ç”¨ <code>&quot;cpu&quot;</code>ã€‚</td></tr></tbody></table><h2 id="runå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#runå‡½æ•°"><span><code>run</code>å‡½æ•°</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> DataFlowStorage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    input_image_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">image_path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    input_text_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">longclip_score</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œç®—å­ä¸»é€»è¾‘</p><ol><li>ä» <code>storage</code> è¯»å– DataFrameï¼Œé€è¡Œè¯»å– <code>input_image_key</code> ä¸ <code>input_text_key</code>ã€‚</li><li>ä½¿ç”¨ <code>self.preprocess</code> å°†å›¾åƒè½¬ä¸ºå¼ é‡ <code>img_t</code>ï¼›ä½¿ç”¨ <code>_tokenize_safe</code> å¯¹é•¿æ–‡æœ¬è¿›è¡Œå®‰å…¨åˆ†è¯ä¸æˆªæ–­ï¼ˆä¼˜å…ˆ <code>context_length=248</code>ï¼Œå¤±è´¥åˆ™å›é€€ï¼‰ã€‚</li><li>åˆ†åˆ«å‰å‘ <code>model.encode_image(img_t)</code> ä¸ <code>model.encode_text(txt_t)</code> å¾—åˆ°å›¾åƒ/æ–‡æœ¬ç‰¹å¾ã€‚</li><li>å¯¹ä¸¤ä¸ªç‰¹å¾åš L2 å½’ä¸€åŒ–å¹¶è®¡ç®—ç‚¹ç§¯ä½™å¼¦ç›¸ä¼¼åº¦ <code>cos</code>ï¼Œæ˜ å°„ä¸ºåˆ†æ•° <code>score = (cos + 1) / 2</code>ï¼Œè£å‰ªåˆ° <code>[0,1]</code>ã€‚</li><li>å°†åˆ†æ•°å†™å…¥æ–°åˆ— <code>output_key</code>ï¼Œå†™å› <code>storage</code> å¹¶è¿”å› <code>[output_key]</code>ã€‚</li><li>è‹¥å›¾ç‰‡æ— æ³•è¯»å–æˆ–æ–‡æœ¬ä¸ºç©ºï¼Œåˆ™è¯¥æ ·æœ¬åˆ†æ•°è®°ä¸º <code>0.0</code>ã€‚</li></ol><p>å‚æ•°</p><table><thead><tr><th style="text-align:left;">å‚æ•°å</th><th style="text-align:left;">ç±»å‹</th><th style="text-align:left;">é»˜è®¤å€¼</th><th style="text-align:left;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left;"><code>storage</code></td><td style="text-align:left;"><code>DataFlowStorage</code></td><td style="text-align:left;">æ— </td><td style="text-align:left;">Dataflow çš„è¯»å†™å­˜å‚¨å¯¹è±¡ï¼Œç”¨äºåœ¨ç®—å­å†…éƒ¨è¯»å–ä¸å†™å› DataFrameã€‚</td></tr><tr><td style="text-align:left;"><code>input_image_key</code></td><td style="text-align:left;"><code>str</code></td><td style="text-align:left;"><code>&quot;image_path&quot;</code></td><td style="text-align:left;">è¾“å…¥å›¾ç‰‡åˆ—åï¼Œå¯¹åº”è¯¥ DataFrame ä¸­å­˜æ”¾å›¾åƒè·¯å¾„çš„å­—æ®µã€‚</td></tr><tr><td style="text-align:left;"><code>input_text_key</code></td><td style="text-align:left;"><code>str</code></td><td style="text-align:left;"><code>&quot;text&quot;</code></td><td style="text-align:left;">è¾“å…¥é•¿æ–‡æœ¬åˆ—åï¼Œå¯¹åº”è¯¥ DataFrame ä¸­å­˜æ”¾æ®µè½çº§æ–‡æœ¬æè¿°çš„å­—æ®µã€‚</td></tr><tr><td style="text-align:left;"><code>output_key</code></td><td style="text-align:left;"><code>str</code></td><td style="text-align:left;"><code>&quot;longclip_score&quot;</code></td><td style="text-align:left;">è¾“å‡ºåˆ†æ•°å­—æ®µåï¼ˆèŒƒå›´ <code>[0,1]</code>ï¼‰ï¼Œç”¨äºå­˜æ”¾ LongCLIP å›¾æ–‡å¯¹é½åˆ†æ•°ã€‚</td></tr></tbody></table><h2 id="ğŸ§ -ç¤ºä¾‹ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#ğŸ§ -ç¤ºä¾‹ç”¨æ³•"><span>ğŸ§  ç¤ºä¾‹ç”¨æ³•</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">from</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> dataflow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">utils</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> FileStorage</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">from</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> dataflow</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">operators</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">core_vision </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ImageLongCLIPEvaluator</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 1) å‡†å¤‡ FileStorageï¼ˆè‡³å°‘åŒ…å« image_path ä¸ text ä¸¤åˆ—ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> FileStorage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    first_entry_file_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./dataflow/example/test_image_eval/test_image_eval.jsonl</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    cache_path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./cache_local</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    file_name_prefix</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">longclip_eval</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    cache_type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">jsonl</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 2) åˆå§‹åŒ– LongCLIP è¯„ä¼°ç®—å­ï¼ˆmodel_name å¯ä»¥æ˜¯ç›®å½•æˆ–å…·ä½“æƒé‡æ–‡ä»¶è·¯å¾„ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">evaluator </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ImageLongCLIPEvaluator</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">BeichenZhang/LongCLIP-L-336px</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    device</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">None</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # è‡ªåŠ¨é€‰æ‹© cuda/cpu</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 3) æ‰§è¡Œè¯„ä¼°ï¼šå°†ä¸ºæ¯è¡Œæ–°å¢ longclip_score âˆˆ [0,1]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">cols </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> evaluator</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_image_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">image_path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    input_text_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">longclip_score</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">print</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">cols</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # [&quot;longclip_score&quot;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ğŸ§¾-é»˜è®¤è¾“å‡ºæ ¼å¼-output-format" tabindex="-1"><a class="header-anchor" href="#ğŸ§¾-é»˜è®¤è¾“å‡ºæ ¼å¼-output-format"><span>ğŸ§¾ é»˜è®¤è¾“å‡ºæ ¼å¼ï¼ˆOutput Formatï¼‰</span></a></h3><table><thead><tr><th style="text-align:left;">å­—æ®µå</th><th style="text-align:left;">ç±»å‹</th><th style="text-align:left;">é»˜è®¤å€¼</th><th style="text-align:left;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left;"><code>image_path</code>ï¼ˆæˆ– <code>input_image_key</code> æŒ‡å®šåˆ—ï¼‰</td><td style="text-align:left;"><code>string</code></td><td style="text-align:left;">æ— </td><td style="text-align:left;">è¾“å…¥å›¾ç‰‡è·¯å¾„ã€‚</td></tr><tr><td style="text-align:left;"><code>text</code>ï¼ˆæˆ– <code>input_text_key</code> æŒ‡å®šåˆ—ï¼‰</td><td style="text-align:left;"><code>string</code></td><td style="text-align:left;">æ— </td><td style="text-align:left;">è¾“å…¥é•¿æ–‡æœ¬æè¿°ã€‚</td></tr><tr><td style="text-align:left;"><code>longclip_score</code>ï¼ˆæˆ– <code>output_key</code>ï¼‰</td><td style="text-align:left;"><code>float</code></td><td style="text-align:left;">æ— </td><td style="text-align:left;">é•¿æ–‡æœ¬å›¾æ–‡å¯¹é½åˆ†æ•°ï¼ŒèŒƒå›´ <code>[0,1]</code>ã€‚</td></tr></tbody></table><p>ç¤ºä¾‹è¾“å…¥ï¼š</p><div class="language-jsonl line-numbers-mode" data-highlighter="shiki" data-ext="jsonl" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-jsonl"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">image_path</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1.png</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">text</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">The image shows a man and a woman in what appears to be a car.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¤ºä¾‹è¾“å‡ºï¼š</p><div class="language-jsonl line-numbers-mode" data-highlighter="shiki" data-ext="jsonl" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-jsonl"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">image_path</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1.png</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">text</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">The image shows a man and a woman in what appears to be a car.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">clip_score</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.642</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21)]))}const d=i(n,[["render",l]]),p=JSON.parse('{"path":"/zh/mm_operators/eval/image_longclip_evaluator/","title":"ImageLongCLIPEvaluator","lang":"zh-CN","frontmatter":{"title":"ImageLongCLIPEvaluator","createTime":"2025/10/15 14:30:52","permalink":"/zh/mm_operators/eval/image_longclip_evaluator/"},"readingTime":{"minutes":2.49,"words":748},"git":{"createdTime":1764212321000,"updatedTime":1768125121000,"contributors":[{"name":"happykeyan","username":"happykeyan","email":"hankyang428@163.com","commits":2,"avatar":"https://avatars.githubusercontent.com/happykeyan?v=4","url":"https://github.com/happykeyan"}]},"filePathRelative":"zh/notes/mm_operators/image_understanding/eval/image_longclip_evaluator.md","headers":[]}');export{d as comp,p as data};
